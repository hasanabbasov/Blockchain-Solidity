# **SMART CONTRACT PROJECT**

## 1. INTRODUCTION

   Today, we would like to talk to you about one of the most impressive technologies of recent times, blockchain, and an application based on Ethereum, one of the leading actors of this technology. As the value and usage areas of Ethereum increase, applications that can work integrated with Ethereum are gaining more and more importance. Let’s look at the brief information about Blockchain technology and Ethereum.
### 1.1 BLOCKCHAIN
   Blockchain technology is a decentralized and transparent system that allows multiple parties to securely record and verify transactions in a tamper-proof manner. At its core, a blockchain is a digital ledger or database that stores information in blocks, which are linked together in a chronological and immutable chain.
   Brief explanation of how blockchain technology works: 
- ###  1.1.1. Distributed Network:
  Instead of being stored on a single central server, the blockchain is distributed across a network of computers, known as nodes. Each node maintains a copy of the entire blockchain, ensuring redundancy and increasing security.
- ### 1.1.2. Blocks
  Transactions are grouped into blocks,which contain a set of data, such as transaction details, timestamps, and a unique identifier called a hash. Each block also includes the hash of the previous block, creating a chain-like structure.
- ### 1.1.3. Consensus Mechanism
  To add a new block to the blockchain, the network's participants must agree on its validity. Various consensus mechanisms, such as proof-of-work (PoW) or proof-of-stake (PoS), are used to ensure agreement among the nodes and prevent malicious activities.
- ### 1.1.4. Security and Immutability
  Once a block is added to the blockchain, it becomes extremely difficult to alter or remove. The blocks are secured through cryptographic hashing, which means any change in the block's data would result in a different hash. As each block's hash is included in the subsequent block, tampering with one block would require altering the entire chain, making it highly impractical.
- ### 1.1.5. Transparency and Privacy
  While the content of transactions is typically visible on the blockchain, the participants' identities may remain pseudonymous. Public blockchains allow anyone to view and verify transactions, promoting transparency. However, private blockchains can restrict access to authorized participants, providing additional privacy.
    Blockchain technology has gained significant attention due to its potential applications beyond cryptocurrencies. It can be used for various purposes, such as supply chain management, digital identity verification, smart contracts, decentralized finance (DeFi), voting systems, and more. The immutability, transparency, and security offered by blockchain make it an appealing solution for industries seeking to streamline processes, increase trust, and reduce reliance on intermediaries.
### 1.2 ETHEREUM
Ethereum is an open-source blockchain platform that enables the development and execution of decentralized applications and smart contracts. It was proposed by Vitalik Buterin in 2013 and launched in 2015. While Bitcoin primarily serves as a digital currency, Ethereum extends the functionality of blockchain technology to enable programmable transactions and the creation of decentralized applications.

_Ethereum's key features:_

- ### 1.2.1. Smart Contracts
  Ethereum introduced the concept of smart contracts, which are self-executing agreements with the terms of the contract directly written into the code. These contracts automatically execute when predefined conditions are met, removing the need for intermediaries, and enhancing efficiency in various domains, including finance, supply chain management, gaming, and more.
- ###  1.2.2. Ether (ETH)
  Ether is the native cryptocurrency of the Ethereum platform. It serves as a fuel for executing smart contracts and powering decentralized applications. Participants in the Ethereum network can use ether for transactions, computational services, or as a store of value.
- ### 1.2.3. Decentralized Applications
  Ethereum provides a platform for developers to build and deploy decentralized apps. These applications can leverage the blockchain's decentralized and distributed nature to offer enhanced security, transparency, and user control. Examples of dApps include decentralized exchanges, prediction markets, decentralized finance (DeFi) platforms, and more.
- ### 1.2.4. EthereumVirtualMachine(EVM)
  The EVM is a runtime environment that executes smart contracts on the Ethereum network. It enables developers to write code in various programming languages, such as Solidity, and deploy it on the Ethereum blockchain. The EVM ensures the consistent execution of smart contracts across all network nodes.
  1.2.5. Gas: Gas is a unit used to measure the computational effort required to execute transactions and smart contracts on the Ethereum network. Each operation on the network consumes a specific amount of gas, and participants must pay for gas using ether. Gas fees incentivize efficient use of network resources and prioritize transactions based on their associated fees.
  1.2.6. Ethereum Improvement Proposals (EIPs): EIPs are proposals for technical improvements and new features in the Ethereum ecosystem. They allow community members to contribute ideas and shape the future development of the platform.
  Ethereum's flexibility, programmability, and active developer community have made it a leading platform for blockchain-based innovation. It has fueled the growth of decentralized finance, non-fungible tokens (NFTs), and various other applications that rely on the transparent and trustless nature of blockchain technology. 
## 2. TECHNOLOGIES
###   2.1. React&Vite
   React and Vite are two powerful tools in the world of web development, providing developers with efficient and modern solutions for building interactive user interfaces.
   React is a popular JavaScript library for building user interfaces. It follows a component-based architecture, allowing developers to create reusable UI components that can be composed together to build complex UIs. React utilizes a virtual DOM (Document Object Model) to efficiently update and render components, resulting in fast and responsive user interfaces. It also provides a unidirectional data flow pattern, making it easier to manage state and keep UI in sync with data changes. React has a vibrant ecosystem with a vast collection of libraries and community support, making it a top choice for front-end development.
   Vite, on the other hand, is a build tool that aims to enhance the development experience by providing a fast and lightweight development server. Developed by the creators of Vue.js, Vite focuses on optimizing the development workflow and reducing the build time. It leverages ES modules (ECMAScript modules) to enable fast, on-demand compilation of individual modules during development, leading to quicker feedback loops. Vite supports various front- end frameworks, including React, Vue.js, and others, making it versatile for different project setups.
   When combined, React and Vite offer a potent combination for efficient and streamlined web development. Developers can leverage React's component- based architecture and rich ecosystem while benefiting from Vite's fast and optimized development environment. This pairing allows for rapid prototyping, hot module replacement (HMR) for instant code updates, and efficient bundling for production deployment. The synergy between React and Vite empowers developers to create performant, scalable, and interactive web applications with ease.
### 2.2. MetaMask
   MetaMask is a popular cryptocurrency wallet and browser extension that allows users to interact with blockchain-based applications directly from their web browsers. It serves as a bridge between traditional web browsers and the decentralized world of cryptocurrencies and blockchain technology.
   Initially built as a browser extension for the Ethereum blockchain, MetaMask has gained widespread adoption and expanded its support to other blockchains, including Binance Smart Chain, Polygon, and others. It provides users with a secure and user-friendly interface to manage their digital assets, interact with decentralized applications, and participate in blockchain-based transactions.
   One of the key features of MetaMask is its wallet functionality. Users can securely store their cryptocurrencies, including Ether (ETH) and various ERC- 20 tokens, within MetaMask's encrypted wallet. The wallet's private keys are stored locally on the user's device, giving them full control over their funds while ensuring their security. MetaMask also supports hardware wallets for an additional layer of protection.
   Beyond its wallet capabilities, MetaMask acts as a gateway to the world of decentralized applications. It injects a JavaScript library into web pages, enabling users to seamlessly interact with decentralized apps without the need for additional software or plugins. This allows users to perform various blockchain operations, such as token swaps, decentralized finance transactions, and NFT interactions, directly from their web browsers.
   In summary, MetaMask serves as a crucial tool for individuals looking to engage with blockchain technology and decentralized applications. It combines the security of a cryptocurrency wallet with the convenience of a browser extension, enabling users to manage their digital assets and interact with blockchain networks effortlessly. Whether you're an investor, a developer, or a casual user, MetaMask empowers you to explore the decentralized web and participate in the growing ecosystem of blockchain-based applications.
### 2.3. HARDHAT
   Hardhat is a popular development environment and testing framework for Ethereum smart contract development. It provides a robust set of tools and features that make it easier for developers to build, test, and deploy smart contracts on the Ethereum blockchain.
   Developed in TypeScript, Hardhat offers a flexible and extensible architecture that caters to the needs of both beginner and advanced developers. It integrates seamlessly with popular developer tools and libraries, allowing for a streamlined development workflow.
### 2.4. HARDHAT-WAFFLE
   Hardhat Waffle is an extension or plugin for the Hardhat development environment that adds support for the Waffle testing framework. Waffle is a popular testing library specifically designed for Ethereum smart contracts. It provides a high-level, expressive syntax for writing tests and offers a range of utilities and assertions to simplify the process of testing smart contracts.
   By using Hardhat Waffle, developers can leverage the powerful testing capabilities of Waffle within the Hardhat ecosystem. This combination allows for seamless integration of Waffle's testing functionalities into the development workflow facilitated by Hardhat.
   Hardhat and Waffle through Hardhat Waffle, developers can enhance their smart contract testing process, improve code quality, and ensure robustness and reliability in their Ethereum projects.
### 2.5. ALCHEMY
   Alchemy is a blockchain infrastructure provider that offers a comprehensive set of tools and services to support the development and operation of blockchain applications. It aims to simplify the process of building and scaling blockchain- based projects by providing developers with a reliable and user-friendly platform.
   Alchemy is helped us with the blockchain development meaning it's helped us deploy our blockchain smart contract.
## 3. USER INTERFACE
In main page of the website first of all there is a card which shows your wallet information. It shows the address of your wallet for Ethereum. We are showing the address by hiding some parts to keep it safe.

![blockchain02.jpeg](..%2F..%2Fblockchain02.jpeg)

Then there is a form field for sending Ethereum to someone else. When you want to send Ethereum to someone else, you fill out a form with all
the important details like who you're sending it to, how much you're sending,
and why you're sending it. Then the app uses that information to make sure
the transaction goes smoothly.

![blockchain02.jpeg](..%2F..%2Fblockchain02.jpeg)

![blockchain01.jpeg](..%2F..%2Fblockchain01.jpeg)

By clicking to the ‘Connect Wallet’ button, it allows you to link your special wallet to the app. This special wallet is called Ethereum wallet, and it lets you do the thing like sending Ethereum etc. So, for connecting your wallet we used MetaMask. When user clicks the connect wallet button the app gets your Ethereum wallet address and other information via MetaMask.

![blockchain04.jpeg](..%2F..%2Fblockchain04.jpeg)


This app is giving the ability of buying or selling things easily with Ethereum which is a digital money. It is also providing the track of their digital wallets to see how much Ethereum they have and to ability to see what they bought before. The project is supporting or helping people to using Ethereum easily in their everyday life.

## CODE EXPLANATION
- ### 4.1. Client
  Client side is the frontend part of the project made by using react and vite. There are components and hooks that can handle creating, submitting, and displaying an Ethereum transaction.
-
  **TransactionCard component:** Displays each Ethereum transaction on a separate card. Each card shows the address the transaction was sent to, the address the transaction was sent to, the amount, a possible message, and the timestamp of the transaction. There is also a link showing the corresponding process at etherscan.io.
-
  **Transaction component:** Displays each Ethereum transaction on a separate card. Each card shows the address the transaction was sent to, the address the transaction was sent to, the amount, a possible message, and the timestamp of the transaction. There is also a link showing the corresponding process at etherscan.io.
- 
  **TransactionContext:** This is a React Context for storing and sharing transactions and other related data. This includes transactions, wallet address and form data as well as several functions.
- 
  **TransactionsProvider component:** This is the parent component that provides data to the child components. The useEffect hook checks if the
  wallet is connected when the page loads and gets the current transactions.

- ### 4.2. Solidity
 - **addToBlockchain():** The addToBlockchain function is a public function within the Solidity smart contract. Its purpose is to add a new transaction to the blockchain by storing the transaction details in the transactions array.
1. The function takes four parameters:
   - 1. **receiver:** The address of the transaction receiver (payable).
   - 2. **amount:** The amount of the transaction.
   - 3. **message:** A string representing an optional message associated with the transaction.
   - 4. **keyword:** A string representing an optional keyword associated with the transaction.
   
2. **Transaction Count:** The transactionCount variable is incremented by one, indicating that a new transaction is being added to the blockchain.
3. **Transaction Storage:** The details of the new transaction are stored in the transactions array. A new TransferStruct struct is created with the values:

  - 1.  • **msg.sender:** The address of the transaction sender.

  - 2. • **receiver:** The address of the transaction receiver.

  - 3. • **amount:** The amount of the transaction.

  - 4. • **message:** The optional message associated with the transaction.

  - 5. • **block.timestamp:** The timestamp representing the block when the transaction is added.

  - 6. • **keyword:** The optional keyword associated with the transaction. The TransferStruct object is then pushed into the transactions array.

4. **Event Emission:** The Transfer event is emitted to notify listeners about the occurrence of a new transaction. It includes the same values as the TransferStruct fields: msg.sender, receiver, amount, message, block.timestamp, and keyword. The event serves as a way to log the transaction and provide an event-driven mechanism for external systems to respond to new transactions on the blockchain.

In summary, the addToBlockchain function increments the transaction count, stores the transaction details in the transactions array, and emits the Transfer event to record and notify the addition of a new transaction to the blockchain.

**getAllTransactions() & getTransactionCount():** These methods are both public view functions within the Solidity smart contract. These functions provide read-only access to the transaction data stored in the contract without modifying the contract state. Here's an explanation of what each method does:
1. **getAllTransactions():**

    • **Return Type:** The function returns an array of TransferStruct structures representing all the transactions stored in the contract.

    • **Purpose:** This function allows external callers to retrieve all the
    transactions recorded in the contract.

    • **Implementation:** It simply returns the transactions array, which
    contains all the stored transaction details.

2. **getTransactionCount():**

    • **Return Type:** The function returns an unsigned integer (uint256) representing the total count of transactions stored in the contract.

    • **Purpose:** This function provides the ability to query the total number of transactions recorded in the contract.

    • **Implementation:** It returns the value of the transactionCount variable, which keeps track of the total count of transactions. This variable is incremented each time a new transaction is added to the blockchain using the addToBlockchain function.

In summary, the getAllTransactions function allows for retrieving an array of all the transactions stored in the contract, while the getTransactionCount function provides the count of total transactions stored in the contract. These methods enable users or other contracts to
access and query the transaction data in a read-only manner without altering the contract state.

**getTransactionsBySender():** The getTransactionsBySender method is a public view function within the Solidity smart contract. It allows users to retrieve an array of TransferStruct transactions associated with a specific sender address. Here's an explanation of what the method does:
1. **Parameter:** The function takes a single parameter, sender, which represents the address of the sender for whom the transactions need to be retrieved.
2. **Counting Matches:** The method iterates through the transactions array to count the number of transactions where the sender matches the provided address. It initializes a local variable count to 0 and loops through each transaction in the array. If the sender of a transaction matches the provided sender address, the count is incremented.
3. **Transaction Array Initialization:** After counting the matches, the method initializes a dynamic array senderTransactions of type TransferStruct[] with a length equal to the count value. This array will store the transactions associated with the given sender.
4. **Populating Matched Transactions:** The method iterates through the transactions array again to find transactions where the sender matches the provided address. It uses a separate index j to keep track of the position in the senderTransactions array.
- If the sender of a transaction matches the provided sender address, the current transaction is assigned to senderTransactions[j], and j is incremented.
- This process ensures that only the transactions associated with the given sender are copied to the senderTransactions array.
5. **Returning the Result:** Finally, the method returns the senderTransactions array, which contains all the matched transactions associated with the provided sender address.

In summary, the getTransactionsBySender method allows users to fetch an array of transactions associated with a specific sender address. It counts the matching transactions, initializes a new array, copies the matching transactions to the new array, and returns it as the result. This function provides a convenient way to retrieve specific transactions based on the sender's address.